System.register("chunks:///_virtual/EnemyBlock.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var n,t,r,i,o,c,l,a;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,r=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){o=e.cclegacy,c=e._decorator,l=e.Sprite,a=e.Component}],execute:function(){var u,p,y,s,f,m;o._RF.push({},"2be8dvX6ZlOfqvYc5Ji8rxk","EnemyBlock",void 0);var v=c.ccclass,b=c.property,k=(e("EnemyBlock",(u=v("EnemyBlock"),p=b({type:l}),u((f=n((s=function(e){function n(){for(var n,t=arguments.length,o=new Array(t),c=0;c<t;c++)o[c]=arguments[c];return n=e.call.apply(e,[this].concat(o))||this,r(n,"enemyType",f,i(n)),r(n,"BlockSprite",m,i(n)),n}t(n,e);var o=n.prototype;return o.start=function(){},o.update=function(e){},n}(a)).prototype,"enemyType",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return k.Enemy}}),m=n(s.prototype,"BlockSprite",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=s))||y)),e("EnemyType",function(e){return e[e.Enemy=0]="Enemy",e[e.Ally=1]="Ally",e}({})));o._RF.pop()}}}));

System.register("chunks:///_virtual/GameCode.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EnemyBlock.ts"],(function(e){var t,n,i,l,r,a,o,s,u,c,p,h,y,m,d,B,f,g,b,C,v,S,T,w,P,E,z,R,A;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,l=e.assertThisInitialized},function(e){r=e.cclegacy,a=e._decorator,o=e.Node,s=e.Prefab,u=e.Button,c=e.SpriteFrame,p=e.Sprite,h=e.input,y=e.Input,m=e.instantiate,d=e.tween,B=e.Vec3,f=e.assetManager,g=e.Texture2D,b=e.KeyCode,C=e.view,v=e.UITransform,S=e.Collider2D,T=e.Contact2DType,w=e.RigidBody2D,P=e.ERigidBody2DType,E=e.randomRange,z=e.Component},function(e){R=e.EnemyType,A=e.EnemyBlock}],execute:function(){var O,k,D,_,F,I,N,G,x,H,K,M,V,L,W,Y,U,j,q,J,Q;r._RF.push({},"416f2qSeYdDYro2Wi1uiVoF","GameCode",void 0);var X=a.ccclass,Z=a.property;e("GameCode",(O=X("GameCode"),k=Z({type:o}),D=Z({type:s}),_=Z({type:s}),F=Z({type:s}),I=Z({type:u}),N=Z({type:o}),G=Z({type:c}),x=Z({type:p}),O((M=t((K=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r))||this,i(t,"canvas",M,l(t)),i(t,"level",V,l(t)),i(t,"enemyBall",L,l(t)),i(t,"allyBall",W,l(t)),i(t,"startGameButton",Y,l(t)),i(t,"stickNode",U,l(t)),i(t,"allyBallSprite",j,l(t)),i(t,"lennaImage",q,l(t)),i(t,"ballSpeed",J,l(t)),i(t,"ballStrafeSpeed",Q,l(t)),t.currentBall=null,t}n(t,e);var r=t.prototype;return r.start=function(){h.on(y.EventType.KEY_PRESSING,this.OnKeyPressing,this),h.on(y.EventType.TOUCH_MOVE,this.OnTouchMove,this)},r.onStartGame=function(){var e=this;this.startGameButton.node.removeFromParent();var t=m(this.level);this.canvas.addChild(t),d(this.stickNode).repeatForever(d().by(4,{eulerAngles:new B(360,360,360)},{easing:"linear"})).start();f.loadRemote("https://upload.wikimedia.org/wikipedia/en/7/7d/Lenna_%28test_image%29.png",(function(t,n){if(t)console.error("Image load error",t);else{var i=new g;i.image=n;var l=new c;l.texture=i,console.log("Image loaded successfully ",l),e.lennaImage.spriteFrame=l,console.log("AFTER Image loaded successfully")}})),this.spawnRandomAttackingBall()},r.OnTouchMove=function(e){if(null!=this.currentBall){var t=e.getDelta(),n=this.currentBall.getPosition();this.currentBall.setPosition(n.x+t.x,n.y,n.z)}},r.OnKeyPressing=function(e){if(null!=this.currentBall){var t=this.currentBall.getPosition();e.keyCode===b.ARROW_LEFT&&this.currentBall.setPosition(t.x-this.ballStrafeSpeed,t.y,t.z),e.keyCode===b.ARROW_RIGHT&&this.currentBall.setPosition(t.x+this.ballStrafeSpeed,t.y,t.z)}},r.spawnRandomAttackingBall=function(){if(this.enemyBall&&this.canvas){this.currentBall=m(this.enemyBall),this.canvas.addChild(this.currentBall);var e=C.getVisibleSize(),t=this.currentBall.getComponent(v),n=t?t.contentSize.height:0,i=-e.height/2+n/2;this.currentBall.setPosition(0,i,0);var l=this.currentBall.getComponent(S);l&&(l.on(T.BEGIN_CONTACT,this.onBeginContact,this),l.on(T.END_CONTACT,this.onEndContact,this)),this.currentBall.getComponent(w).type=P.Dynamic;var r=E(0,1)>.3?R.Ally:R.Enemy;this.currentBall.getComponent(A).enemyType=r,r==R.Ally&&(this.currentBall.getComponent(A).BlockSprite.spriteFrame=this.allyBallSprite)}},r.onBeginContact=function(e,t,n){var i=this;if(null!=this.currentBall&&(e.node==this.currentBall||t.node==this.currentBall)){var l=this.currentBall.getComponent(A).enemyType,r=t.node.getComponent(A).enemyType;if(l==R.Ally&&r==R.Enemy)this.scheduleOnce((function(){t.node.removeFromParent(),e.node.removeFromParent(),i.spawnRandomAttackingBall()}),.001),this.currentBall=null;else this.currentBall.getComponent(w).type=P.Kinematic,this.spawnRandomAttackingBall()}},r.onEndContact=function(e,t,n){},r.onDestroy=function(){this.unregisetrterBallCollisionHandlers()},r.unregisetrterBallCollisionHandlers=function(){if(this.currentBall){var e=this.currentBall.getComponent(S);e&&(e.off(T.BEGIN_CONTACT,this.onBeginContact,this),e.off(T.END_CONTACT,this.onEndContact,this))}},r.updateBallPosition=function(e){if(this.currentBall){var t=this.ballSpeed*e,n=this.currentBall.getPosition();n.y+=t,this.currentBall.setPosition(n)}},r.handleBallOutOfBounds=function(){if(this.currentBall){var e=C.getVisibleSize(),t=this.currentBall.getComponent(v),n=t?t.contentSize.height:0;this.currentBall.getPosition().y-n/2>e.height/2&&(this.unregisetrterBallCollisionHandlers(),this.currentBall.removeFromParent(),this.currentBall=null,this.spawnRandomAttackingBall())}},r.update=function(e){this.updateBallPosition(e),this.handleBallOutOfBounds()},t}(z)).prototype,"canvas",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=t(K.prototype,"level",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(K.prototype,"enemyBall",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=t(K.prototype,"allyBall",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=t(K.prototype,"startGameButton",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=t(K.prototype,"stickNode",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=t(K.prototype,"allyBallSprite",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=t(K.prototype,"lennaImage",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=t(K.prototype,"ballSpeed",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),Q=t(K.prototype,"ballStrafeSpeed",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),H=K))||H));r._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./GameCode.ts","./StartGameButton.ts","./EnemyBlock.ts"],(function(){return{setters:[null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/StartGameButton.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,n,r,o;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,r=t._decorator,o=t.Component}],execute:function(){var u;n._RF.push({},"be32dvTOUJCkKa1Yse1hmAi","StartGameButton",void 0);var a=r.ccclass;r.property,t("StartGameButton",a("StartGameButton")(u=function(t){function n(){return t.apply(this,arguments)||this}e(n,t);var r=n.prototype;return r.start=function(){},r.update=function(t){},n}(o))||u);n._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});